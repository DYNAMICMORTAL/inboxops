<!DOCTYPE html>
<html>
<head>
    <title>InboxOps - Processed Emails</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <h1>InboxOps</h1>
    <div class="container">
        <h2>Recent Emails</h2>
        <table class="table">
            <thead>
                <tr>
                    <th>Type</th>
                    <th>Key</th>
                    <th>Title</th>
                    <th>Sender</th>
                    <th>Summary</th>
                    <th>Status</th>
                    <th>Received</th>
                </tr>
            </thead>
                        <tbody>
                {% for email in emails %}
                <tr>
                    <td>
                        {% if email.type == "ORDER" %}
                            <span class="badge badge-success">Order</span>
                        {% elif email.type == "APPROVAL" %}
                            <span class="badge badge-warning">Approval</span>
                        {% else %}
                            <span class="badge badge-danger">Spam</span>
                        {% endif %}
                    </td>
                    <td>{{ email.key }}</td>
                    <td>{{ email.subject }}</td>
                    <td>{{ email.from_email }}</td>
                    <td>
                        {% if email.summary %}
                            <span class="badge badge-success">{{ email.summary }}</span>
                        {% else %}
                            <span class="badge badge-warning">Processing...</span>
                        {% endif %}
                    </td>
                    <td>
                        {% set status = check_email_status(email) %}
                        <span class="badge badge-{{ status.lower() }}">{{ status }}</span>
                    </td>
                    <td class="text-muted">{{ email.received_at }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</body>
</html>
