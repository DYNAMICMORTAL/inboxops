<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>InboxOps Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  </head>
  <body class="min-h-screen bg-muted font-sans antialiased">
    <div class="flex min-h-screen w-full">
      <!-- Sidebar -->
      <aside class="bg-gray-50 border-r border-gray-200 min-h-screen flex-shrink-0">
        {% include 'sidebar.html' %}
      </aside>

      <!-- Main content area -->
      <div class="flex flex-col flex-1 min-h-screen">
        <!-- Header -->
        {% include 'header.html' %}

        <!-- Page Content -->
        <main class="flex-1 p-4">
          {% block content %}{% endblock %}
        </main>
      </div>
    </div>
    <!-- ...existing code... -->
      <!-- AI Chat Circle Button -->
      <div id="ai-chat-btn" class="fixed bottom-8 right-8 w-14 h-14 bg-blue-600 rounded-full flex items-center justify-center shadow-lg cursor-pointer z-50">
        <span class="text-white text-2xl">ðŸ¤–</span>
      </div>

      <!-- AI Chat Modal -->
      <div id="ai-chat-modal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg w-full max-w-md p-4 flex flex-col">
          <div class="flex justify-between items-center mb-2">
            <span class="font-bold text-lg">Enterprise AI Chat</span>
            <button onclick="closeAIChat()" class="text-gray-400 hover:text-gray-700">&times;</button>
          </div>
          <div id="ai-chat-history" class="flex-1 overflow-y-auto mb-2" style="max-height:300px;"></div>
          <div class="flex">
            <input id="ai-chat-input" type="text" class="flex-1 border rounded px-2 py-1" placeholder="Ask anything..." />
            <button onclick="sendAIChat()" class="ml-2 bg-blue-600 text-white px-4 py-1 rounded">Send</button>
          </div>
        </div>
      </div>
      <script>
document.getElementById('ai-chat-btn').onclick = function() {
    document.getElementById('ai-chat-modal').classList.remove('hidden');
};
function closeAIChat() {
    document.getElementById('ai-chat-modal').classList.add('hidden');
}
async function sendAIChat() {
    const input = document.getElementById('ai-chat-input');
    const message = input.value.trim();
    if (!message) return;
    appendAIChat('You', message);
    input.value = '';
    const res = await fetch('/ai-chat', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({message})
    });
    const data = await res.json();
    appendAIChat('AI', data.answer);
}
function appendAIChat(sender, text) {
    const history = document.getElementById('ai-chat-history');
    const div = document.createElement('div');
    div.className = 'mb-2';
    div.innerHTML = `<strong>${sender}:</strong> ${text}`;
    history.appendChild(div);
    history.scrollTop = history.scrollHeight;
}
</script>
  </body>
</html>