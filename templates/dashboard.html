{% extends "layout.html" %}

{% block title %}
Dashboard - InboxOps
{% endblock %}

{% block content %}
<!-- <h1 class="text-2xl font-bold mb-4">InboxOps Dashboard</h1> -->
<link rel="stylesheet" href="../static/styles.css">
<!-- Search Bar -->
<div class="relative w-full max-w-md mb-6">
    <input type="text" placeholder="Search orders..." class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring"/>
    <span class="absolute right-3 top-2.5 text-gray-400">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M12.9 14.32a8 8 0 111.414-1.414l4.387 4.386a1 1 0 01-1.414 1.415l-4.387-4.387zM8 14a6 6 0 100-12 6 6 0 000 12z" clip-rule="evenodd" />
        </svg>
    </span>
</div>

<section class="mb-8">
    <h2 class="text-xl font-semibold mb-3">Orders</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        {% for order in orders %}
        <a href="/orders/{{ order.id }}" class="order-card border rounded-lg p-4 shadow-sm bg-white transform transition-transform duration-200 hover:scale-105">
            <!-- Order Header -->
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h11M9 21V3m0 0L3 10m6-7l6 7" />
                    </svg>
                    <span class="font-black text-gray-700">#{{ order.id }}</span>
                    <div class="orderKey font-black">
                        {{ order.key }}
                    </div>
                </div>
                <span class="badge badge-confirmed">Confirmed</span>
            </div>

            <!-- Customer Information -->
            <div class="mb-4">
                <p class="text-sm text-gray-500">Customer</p>
                <p class="font-semibold text-lg text-gray-800">
                    {% for email in emails %}
                        {% if email.type == 'ORDER' and email.key == order.key %}
                            {{ email.from_email }}
                        {% endif %}
                    {% endfor %}
                </p>
            </div>

            <div class="mb-4 flex justify-between items-center">
                <!-- Quantity -->
                <div class="-m-200px">
                    <p class="text-sm text-gray-500">Quantity</p>
                    <p class="font-semibold text-xl text-gray-800">{{ order.quantity }}</p>
                </div>

                <!-- Total Value -->
                <div style="margin-right: 5vw;">
                    <p class="text-sm text-gray-500">Total Value</p>
                    <p class="font-semibold text-green-600">USD {{ order.total_value }}</p>
                </div>
            </div>

            <!-- AI Summary -->
            <div class="mb-4 p-4 bg-blue-50 rounded-lg shadow-sm">
                <h3 class="text-sm font-semibold text-blue-600 mb-1">AI Summary</h3>
                <p class="text-sm text-gray-700">{{ order.summary }}</p>
            </div>

            <!-- Automation Progress -->
            <div class="mb-4">
                <p class="text-sm text-gray-500">Automation Progress</p>
                <div class="w-full bg-gray-200 rounded-full h-2.5">
                    <div class="bg-black h-2.5 rounded-full" style="width: 50%;"></div>
                </div>
                <!-- <p class="text-sm text-gray-500 mt-1">{{ order.progress }}/5</p> -->
            </div>

            <!-- Footer -->
            <div class="flex items-center justify-between text-sm text-gray-500">
                <div class="flex items-center gap-2">
                    <svg width="5%" height="5%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
 <path d="M21 10H3M16 2V6M8 2V6M7.8 22H16.2C17.8802 22 18.7202 22 19.362 21.673C19.9265 21.3854 20.3854 20.9265 20.673 20.362C21 19.7202 21 18.8802 21 17.2V8.8C21 7.11984 21 6.27976 20.673 5.63803C20.3854 5.07354 19.9265 4.6146 19.362 4.32698C18.7202 4 17.8802 4 16.2 4H7.8C6.11984 4 5.27976 4 4.63803 4.32698C4.07354 4.6146 3.6146 5.07354 3.32698 5.63803C3 6.27976 3 7.11984 3 8.8V17.2C3 18.8802 3 19.7202 3.32698 20.362C3.6146 20.9265 4.07354 21.3854 4.63803 21.673C5.27976 22 6.11984 22 7.8 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
 </svg>
                    <span class="font-black">
                        {{ order.created_at.strftime('%b %d, %I:%M %p') if order.created_at }}
                    </span>
                </div>
                <div class="flex gap-2">
                    {% for tag in order.tags %}
                    <span class="badge badge-tag">{{ tag }}</span>
                    {% endfor %}
                </div>
            </div>
        </a>
        {% endfor %}
    </div>
</section>

<!-- Approvals Section -->
<section>
    <h2 class="text-xl font-semibold mb-3">HR Workflows</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        {% for approval in approvals %}
        <a href="/approvals/{{ approval.id }}" class="approval-card border rounded-lg p-4 shadow-sm bg-white transform transition-transform duration-200 hover:scale-105">
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-purple-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h11M9 21V3m0 0L3 10m6-7l6 7" />
                    </svg>
                    <span class="font-black text-gray-700">{{ approval.approval_type }}</span>
                </div>
                <span class="badge badge-under-review">Under Review</span>
            </div>
            <div class="mb-4">
                <p class="text-sm text-gray-500">Employee</p>
                <p class="font-semibold text-lg text-gray-800">{{ approval.sender }}</p>
            </div>
            <div class="mb-4">
                <p class="text-sm text-gray-500">Request Type</p>
                <p class="font-semibold text-lg text-gray-800">{{ approval.approval_type }}</p>
            </div>
            <div class="mb-4 p-4 bg-purple-50 rounded-lg shadow-sm">
                <h3 class="text-sm font-semibold text-purple-600 mb-1">Description</h3>
                <p class="text-sm text-gray-700">{{ approval.request_text }}</p>
            </div>
            <div class="flex items-center justify-between text-sm text-gray-500">
                <div class="flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 4h10M5 21h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                    </svg>
                    <span class="font-black">
                        SLA: {{ approval.created_at.strftime('%b %d, %I:%M %p') }}
                    </span>
                </div>
                <div class="flex gap-2">
                    <span class="badge badge-tag">{{ approval.approval_type }}</span>
                    <span class="badge badge-tag">HR</span>
                </div>
            </div>
        </a>
        {% endfor %}
    </div>
</section>
{% endblock %}